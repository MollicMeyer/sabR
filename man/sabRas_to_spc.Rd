% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sabRas_to_spc.R
\name{sabRas_to_spc}
\alias{sabRas_to_spc}
\title{Convert Raster Stack to SoilProfileCollection with Depth Aggregation}
\usage{
sabRas_to_spc(
  stack = rstack,
  props = c("sand", "clay", "silt", "TOC", "BD"),
  depths = c("0-5", "5-15", "15-30", "30-60", "60-100", "100-150", "150-200"),
  new_depths = c(0, 5, 15, 30, 60, 100, 150, 200),
  source = "SABR",
  group_poly = NULL,
  id_column = NULL
)
}
\arguments{
\item{stack}{SpatRaster; the raster stack where layer names follow the pattern \code{property_depth}, e.g., \code{sand_0-5}.}

\item{props}{Character vector; soil properties to include (e.g., \code{"sand"}, \code{"clay"}).}

\item{depths}{Character vector; raster depth intervals to include. Must be a subset of:
\code{"0-5"}, \code{"5-15"}, \code{"15-30"}, \code{"30-60"}, \code{"60-100"}, \code{"100-150"}, \code{"150-200"}.}

\item{new_depths}{Numeric vector; standard depths (in cm) to aggregate to, e.g., \code{c(0, 15, 30, 60, 100)}.}

\item{source}{Character; optional prefix for profile IDs (e.g., \code{"SABR"}).}

\item{group_poly}{Optional; sf, SpatVector, or character path to polygon shapefile for assigning group IDs.}

\item{id_column}{Optional; name of column in \code{group_poly} to use for group assignment.}
}
\value{
A \code{SoilProfileCollection} aggregated to the specified \code{new_depths}.
}
\description{
Converts a stack of soil property rasters into an \code{aqp::SoilProfileCollection} object,
then aggregates values to user-defined standard depth intervals.
}
\details{
Each raster pixel becomes a profile. Spatial coordinates are preserved in the site data.
Raster values are diced into 1 cm slices and aggregated to the specified depth bins using mean values.
}
